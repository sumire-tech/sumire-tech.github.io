<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>My Works</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root{
  --bg-top: #f5f5f7;
  --bg-bottom: #dcdde1;
  --card-bg: rgba(220,220,220,0.25);
  --modal-bg: rgba(255,255,255,0.95);
  --modal-shadow: 0 15px 50px rgba(0,0,0,0.2), 0 0 40px rgba(0,0,0,0.1);
}

*{box-sizing:border-box;}
html,body{
  margin:0;
  font-family:"Inter",sans-serif;
  background: linear-gradient(to bottom, var(--bg-top), var(--bg-bottom));
  color: #333;
  overflow-x:hidden;
  position:relative;
}

/* 背景キャンバス */
canvas#bgCanvas {
  position:fixed;
  inset:0;
  z-index:1;
}

/* コンテナ */
.container {
  width:100%;
  max-width:900px;
  margin:0 auto;
  padding:60px 20px;
  position:relative;
  z-index:4;
}

/* カード */
.card {
  margin:60px 0;
  padding: 40px;
  background: var(--card-bg);
  border-radius:20px;
  backdrop-filter: blur(30px) saturate(180%);
  -webkit-backdrop-filter: blur(30px) saturate(180%);
  box-shadow: 0 15px 50px rgba(0,0,0,0.12), 0 0 40px rgba(255,255,255,0.08);
  text-align:center;
  cursor:pointer;
  position:relative;
  z-index:5;
  transition: transform 0.5s ease, box-shadow 0.5s ease;
  background-image: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.05) 0%, transparent 50%),
                    radial-gradient(circle at 70% 70%, rgba(255,255,255,0.05) 0%, transparent 50%);
}

.card::after {
  content:"";
  position:absolute;
  top:0; left:0; right:0; bottom:0;
  border-radius:20px;
  pointer-events:none;
  background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0));
  opacity:0.6;
  mix-blend-mode: overlay;
}

.card:hover{
  transform: translateY(-5px) scale(1.02);
  box-shadow: 0 25px 80px rgba(0,0,0,0.15), 0 0 60px rgba(255,255,255,0.12);
}
.card h2{ font-family:"Playfair Display", serif; font-size:2rem; margin:0 0 20px; color: #333; }
.card p{ font-size:1.1rem; line-height:1.6; color: #444; margin:0 auto; max-width:60ch; }

/* モーダル */
#modal {
  position:fixed;
  inset:0;
  background: var(--modal-bg);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:6;
  opacity:0;
  transition: opacity 0.5s ease;
}
#modal.show{ opacity:1; display:flex; }

#modalContent {
  background: var(--modal-bg);
  border-radius:20px;
  padding:50px 40px;
  max-width:700px;
  max-height:80vh;
  color: #333;
  backdrop-filter: blur(25px) saturate(180%);
  -webkit-backdrop-filter: blur(25px) saturate(180%);
  text-align:center;
  overflow-y:auto;
  box-shadow: var(--modal-shadow);
  position:relative;
}

#modalClose{
  position:absolute;
  top:15px;
  right:20px;
  font-size:1.5rem;
  cursor:pointer;
  color: #333;
}

#playButton {
  display:inline-block;
  margin-top:25px;
  padding:12px 25px;
  background:#333;
  color:#fff;
  border-radius:12px;
  text-decoration:none;
  font-weight:600;
  transition: transform 0.3s, background 0.3s;
}
#playButton:hover{
  transform: scale(1.05);
  background:#555;
}

/* GitHubアイコンリンク */
#modalInner a.github-icon {
  display:inline-block;
  font-size:2.5rem;
  color:#333;
  margin-top:25px;
  transition: transform 0.3s, color 0.3s;
}
#modalInner a.github-icon:hover{
  transform: scale(1.1);
  color:#555;
}

/* カード開閉アニメーション */
.card.open{
  animation: cardOpen 0.6s forwards;
}
@keyframes cardOpen{
  0% { transform: scale(1) rotateX(0deg) rotateY(0deg); }
  50% { transform: scale(1.05) rotateX(4deg) rotateY(2deg); }
  100% { transform: scale(1) rotateX(0deg) rotateY(0deg); }
}
</style>
</head>
<body>

<canvas id="bgCanvas"></canvas>

<div class="container">
  <div class="card" data-title="BlackJack" data-summary="シンプルなブラックジャックゲームです。" data-url="myworks/blackjack.html">
    <h2>BlackJack</h2>
  </div>

  <div class="card" data-title="Links" data-summary="ここでは関連リンクをまとめています。" data-url="https://github.com/sumire-tech">
    <h2>Links</h2>
  </div>
</div>

<div id="modal">
  <div id="modalContent">
    <div id="modalClose">&times;</div>
    <div id="modalInner">
      <h2>サンプルタイトル</h2>
      <p>ここに概要が入ります。</p>
      <a href="#" id="playButton">Play</a>
    </div>
  </div>
</div>

<script>
const modal = document.getElementById("modal");
const modalClose = document.getElementById("modalClose");
const modalInner = document.getElementById("modalInner");

document.querySelectorAll(".card").forEach(card=>{
  card.addEventListener("click", ()=>{
    card.classList.add("open");
    setTimeout(()=>{ card.classList.remove("open"); },600);

    modal.style.display="flex";
    setTimeout(()=>{ modal.classList.add("show"); },10);

    const title = card.dataset.title;
    const summary = card.dataset.summary;
    const url = card.dataset.url;

    if(title.toLowerCase() === "links"){
      modalInner.innerHTML = `<h2>${title}</h2><p>${summary}</p>
        <a href="${url}" target="_blank" class="github-icon"><i class="fab fa-github"></i></a>`;
    } else {
      modalInner.innerHTML = `<h2>${title}</h2><p>${summary}</p><a href="${url}" target="_blank" id="playButton">Play</a>`;
    }
  });
});

function closeModal(){
  modal.classList.remove("show");
  setTimeout(()=>{ 
    modal.style.display="none"; 
    modalInner.innerHTML="<h2>サンプルタイトル</h2><p>ここに概要が入ります。</p><a href='#' id='playButton'>Play</a>";
  },500);
}

modalClose.addEventListener("click", closeModal);
modal.addEventListener("click",(e)=>{ if(e.target===modal) closeModal(); });

// ===== 背景幾何学アニメーション =====
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
let width = canvas.width = window.innerWidth;
let height = canvas.height = window.innerHeight;

function resizeCanvas() {
  width = canvas.width = window.innerWidth;
  height = canvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);

// シェイプ定義（前の幾何学模様）
const shapes = [];
for(let i=0;i<50;i++){
  shapes.push({
    x: Math.random()*width,
    y: Math.random()*height,
    size: 10 + Math.random()*25,
    dx: (Math.random()-0.5)*0.6,
    dy: (Math.random()-0.5)*0.6,
    angle: Math.random()*Math.PI*2,
    type: Math.random()>0.5 ? "circle" : "triangle"
  });
}

function drawShape(s){
  ctx.save();
  ctx.translate(s.x, s.y);
  ctx.rotate(s.angle);
  ctx.strokeStyle = "rgba(0,0,0,0.08)"; // 透明度軽めで暗くならない
  ctx.lineWidth = 1;

  if(s.type==="circle"){
    ctx.beginPath();
    ctx.arc(0,0,s.size,0,Math.PI*2);
    ctx.stroke();
  } else {
    ctx.beginPath();
    ctx.moveTo(-s.size,s.size);
    ctx.lineTo(0,-s.size);
    ctx.lineTo(s.size,s.size);
    ctx.closePath();
    ctx.stroke();
  }
  ctx.restore();
}

function animate(){
  ctx.clearRect(0,0,width,height);
  shapes.forEach(s=>{
    s.x += s.dx;
    s.y += s.dy;
    s.angle += 0.001;
    if(s.x<-s.size||s.x>width+s.size||s.y<-s.size||s.y>height+s.size){
      Object.assign(s,{
        x: Math.random()*width,
        y: Math.random()*height,
        size: 10 + Math.random()*25,
        dx: (Math.random()-0.5)*0.6,
        dy: (Math.random()-0.5)*0.6,
        angle: Math.random()*Math.PI*2,
        type: Math.random()>0.5 ? "circle" : "triangle"
      });
    }
    drawShape(s);
  });
  requestAnimationFrame(animate);
}
animate();
</script>
</body>
</html>
